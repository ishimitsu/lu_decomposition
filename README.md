# このプログラムについて
このプログラムは、任意の正方行列を入力として、LU分解によりその逆行列を求めます。

# 使い方
1. 本プログラムをダウンロードする
2. 端末で本プログラムのディレクトリに移動
3. "make"コマンドを実行、プログラムをビルドする
4. input_matrix.txtに、以下の例のようなフォーマットで逆行列を求めたい正方行列を記述する
```
3        -> 入力する正方行列の次数
1 2 1    
2 0 1    -> 入力する正方行列
3 4 5       各成分はスペースで区切る。成分として整数/少数を設定可能
```
5. "./lu_decomposition を実行"、以下のような結果が表示され、逆行列が求められる
```
Matrix A            -> 入力された正方行列A
1 2 1
2 0 1
3 4 5

...

Inversed A Matrix   -> 入力された正方行列Aに対し、算出された逆行列
0.4000 0.6000 -0.2000
0.7000 -0.2000 -0.1000
-0.8000 -0.2000 0.4000

Check A * A_INV = A_INV * A = E ... OK -> 算出された結果が逆行列であるかを確認
```

# LU分解による逆行列の求め方
本プログラムは、以下の順序で逆行列を求めている
1. 入力された行列をAとする
2. A = PA によるピボット選択を行う
Aの成分によっては、後述のLU分解/逆行列の算出にて、0除算が発生する可能性がある (Aの全対角成分が0の時など)。
これを回避するため、ピボット選択(行の交換)を行い、行交換を行ったA (A_PV)、及び交換した行を記憶した置換行列Pを生成する
3. PA = LU を求める (LU分解)
PAを、以下の例のようにL(下三角行列)、U(上三角行列)に分解する。
```
| a11 a22 a13 |   | 1   0   0 | u11 u12 u13 |
| a21 a22 a23 | = | l21 1   0 |  0  u22 u23 |
| a31 a32 a33 |   | l31 l32 1 |  0   0  u33 |
```
Aがn次の場合、LUの各成分は以下のように求める。

4. Aの逆行列 = Uの逆行列 * Lの逆行列 * 置換行列P を求める (Aの逆行列の算出)
L(下三角行列)、U(上三角行列)の逆行列の各成分、以下のように求める。

Uの逆行列 * Lの逆行列 * 置換行列P から、最終的にAの逆行列が求められる。

# プログラムの内部動作

# ファイル構成
```
README.md                 : 本プログラムの解説
Makefile                  : 本プログラムのビルド用Makefile
input_matrix.txt          : 本プログラムへの入力値となる、行列の次数/成分
test_pattern              : ピボット選択が必要である入力行列等、本プログラムのテスト用行列パターンを格納。本プログラムは使用しない
lu_decomposition          : 本プログラムの実行バイナリ
src - common.h            : 本プログラムのデバッグ出力を指定可能。LU分解/逆行列の算出結果の表示、算出結果の検証実行の有無を指定可能
    - inverse_matrix.c    : 分解されたLUの逆行列を求めるプログラム
    - lu_decomposition.c  : LU分解を実施するプログラム
    - matrix.c/h          : 行列操作に関するプログラム (input_matrix.txtからの入力行列Aの読み込み、ピボット選択、行列比較など)
    - main.c              : 本プログラムのmain()プログラム
```
# TODO
- メモリ消費の削減
行列A, 置換行列P, ピボット選択されたA、下上三角行列LP、逆行列A/L/Uそれぞれで、行列処理のため"double * n次 * n次"分のメモリ確保を行なっている。
流石にメモリを消費しすぎのため、LUを1つのn次行列にまとめる等の対応が必要
- 行列成分の分数管理
現在、行列の各成分はdouble型で管理している。
LU分解や逆行列の算出にて、割り切れない除算が発生した場合、算出した逆行列の成分として循環小数得られる。
この場合、逆行列であるかの確認、"A * 循環小数含む逆行列A = E"が正確に求められない。
正確に求めるなら、循環小数は分数で管理すべき。
